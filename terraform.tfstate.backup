{
  "version": 4,
  "terraform_version": "0.12.5",
  "serial": 479,
  "lineage": "8a2c8922-a714-79e3-0633-9b067e3875a7",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_check_ebs_application_version_readiness",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "5589dd9b0362ff1f8e406c7c11f26c3f40e1e785",
            "output_base64sha256": "pmBLR82r9JOiOe3Bk8WIYuaOm1yosClTrM2IYfIJK9E=",
            "output_md5": "d95bfe37af1e9ca8a7b521f5f8d184f7",
            "output_path": "tmp/check_ebs_application_version_readiness.zip",
            "output_sha": "5589dd9b0362ff1f8e406c7c11f26c3f40e1e785",
            "output_size": 575,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/check_ebs_application_version_readiness.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_check_ebs_environment_readiness",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "e0fc52ce39e7d65a357c5543bb561e55bd488d79",
            "output_base64sha256": "Hns3Bm6VC/ROVioSRA4VplbzAlDCcTlROlChBzFf764=",
            "output_md5": "ed5a82c80acefb9ecfe277691c4f8dd3",
            "output_path": "tmp/check_ebs_environment_readiness.zip",
            "output_sha": "e0fc52ce39e7d65a357c5543bb561e55bd488d79",
            "output_size": 524,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/check_ebs_environment_readiness.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_create_ebs_application_version",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "f9bff70ca4f13f6ad8e87ebc6dc8a97c86c78faa",
            "output_base64sha256": "u2Wo1f4Iga7YvS9suFrkN8oFehT5UGbR2JAo5C+ocKo=",
            "output_md5": "0a188eff26bde763ad09b3e10d873c04",
            "output_path": "tmp/create_ebs_application_version.zip",
            "output_sha": "f9bff70ca4f13f6ad8e87ebc6dc8a97c86c78faa",
            "output_size": 800,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/create_ebs_application_version.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_create_ebs_environment",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "94ef2d044fd2d0949711e34442a630d6312d78a6",
            "output_base64sha256": "nrHj4TCaDi2Bsws0JRAa15iijROFsIa8KrCxkZlaSBM=",
            "output_md5": "54c50da65db37e1dd53d59dc263d3d5b",
            "output_path": "tmp/create_ebs_environment.zip",
            "output_sha": "94ef2d044fd2d0949711e34442a630d6312d78a6",
            "output_size": 830,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/create_ebs_environment.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_deploy_ebs_application",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "c727f3bb260f80a64822f2fb27174e07d2ad2dfc",
            "output_base64sha256": "XulCn5eUT3FoLCgaOHOuOhsCGxGtq9JxJc0NdKTKHJA=",
            "output_md5": "7c890005e34df9a9d0cdb9e1aa9d1e51",
            "output_path": "tmp/deploy_ebs_application.zip",
            "output_sha": "c727f3bb260f80a64822f2fb27174e07d2ad2dfc",
            "output_size": 518,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/deploy_ebs_application.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_evaluate_ebs_application_versions",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "3655a14cc142aefc93bee7246f9e9f9bac247348",
            "output_base64sha256": "Dae3YlkL+yRK4Ou2hbc6lZVGE6oz70CFkrnvfL0WXNs=",
            "output_md5": "44b4944b9f89f3317aa7171829be8826",
            "output_path": "tmp/evaluate_ebs_application_versions.zip",
            "output_sha": "3655a14cc142aefc93bee7246f9e9f9bac247348",
            "output_size": 701,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/evaluate_ebs_application_versions.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_evaluate_ebs_environments",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "6eafbbbde87144a5208c098152cbc22ecbf65d96",
            "output_base64sha256": "thhwFnerFpAbrezApHw/cP2iYGNYdT6mQum6HDSFKi4=",
            "output_md5": "b20feaac5b5330293ef438a993c0fed5",
            "output_path": "tmp/evaluate_ebs_environments.zip",
            "output_sha": "6eafbbbde87144a5208c098152cbc22ecbf65d96",
            "output_size": 1451,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/evaluate_ebs_environments.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_terminate_ebs_environment",
      "provider": "provider.archive",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "excludes": null,
            "id": "4656729a8d305be0a1ff1a189538fe3f0cd8cc9a",
            "output_base64sha256": "Dt9RAw56FTtTOk9VE2x1xkDgdGlvOSdEbj9L9N0xqio=",
            "output_md5": "fac0b39c894fc32f248667b355fec270",
            "output_path": "tmp/terminate_ebs_environment.zip",
            "output_sha": "4656729a8d305be0a1ff1a189538fe3f0cd8cc9a",
            "output_size": 487,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": "files/lambda/terminate_ebs_environment.py",
            "type": "zip"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "858463413507",
            "arn": "arn:aws:iam::858463413507:user/admin",
            "id": "2019-07-23 18:12:23.758143 +0000 UTC",
            "user_id": "AIDA4PYDIEUBTFUTLJPPT"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "streetbees_deployment_trust_relationship",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3349830580",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": [\n          \"states.amazonaws.com\",\n          \"lambda.amazonaws.com\"\n        ]\n      }\n    }\n  ]\n}",
            "override_json": null,
            "policy_id": null,
            "source_json": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com",
                      "states.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "streetbees_step_functions_deployment_policy",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3883735256",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"tag:*\",\n        \"lambda:InvokeFunction\",\n        \"iam:PassRole\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "override_json": null,
            "policy_id": null,
            "source_json": null,
            "statement": [
              {
                "actions": [
                  "iam:PassRole",
                  "lambda:InvokeFunction",
                  "tag:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_file",
      "name": "sfn_blue_green_ebs_deployment",
      "provider": "provider.template",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_elastic_beanstalk_application",
      "name": "streetbees_cats",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "appversion_lifecycle": [],
            "arn": "arn:aws:elasticbeanstalk:eu-west-1:858463413507:application/streetbees-cats",
            "description": "Ruby Web app for cat lovers.",
            "id": "streetbees-cats",
            "name": "streetbees-cats",
            "tags": {}
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_elastic_beanstalk_configuration_template",
      "name": "streetbees_cats_configuration",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application": "streetbees-cats",
            "description": "",
            "environment_id": null,
            "id": "streetbees-cats-configuration",
            "name": "streetbees-cats-configuration",
            "setting": [
              {
                "name": "Availability Zones",
                "namespace": "aws:autoscaling:asg",
                "resource": "",
                "value": "Any 2"
              },
              {
                "name": "EnvironmentType",
                "namespace": "aws:elasticbeanstalk:environment",
                "resource": "",
                "value": "LoadBalanced"
              },
              {
                "name": "MaxSize",
                "namespace": "aws:autoscaling:asg",
                "resource": "",
                "value": "2"
              },
              {
                "name": "MinSize",
                "namespace": "aws:autoscaling:asg",
                "resource": "",
                "value": "2"
              }
            ],
            "solution_stack_name": "64bit Amazon Linux 2018.03 v2.9.6 running Ruby 2.6 (Puma)"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_elastic_beanstalk_application.streetbees_cats"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "streetbees_step_functions_deployment_policy",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::858463413507:policy/streetbees-step-functions-deployment-policy",
            "description": "Allows Step Functions to invoke Lambda",
            "id": "arn:aws:iam::858463413507:policy/streetbees-step-functions-deployment-policy",
            "name": "streetbees-step-functions-deployment-policy",
            "name_prefix": null,
            "path": "/",
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"tag:*\",\n        \"lambda:InvokeFunction\",\n        \"iam:PassRole\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "data.aws_iam_policy_document.streetbees_step_functions_deployment_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "streetbees_deployment_role",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"states.amazonaws.com\",\"lambda.amazonaws.com\"]},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2019-07-18T14:50:18Z",
            "description": "Allows Step Functions and Lambda to deploy apps on Elastic Beanstalk.",
            "force_detach_policies": false,
            "id": "streetbees-deployment-role",
            "max_session_duration": 3600,
            "name": "streetbees-deployment-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROA4PYDIEUB5BNDNH6LE"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "data.aws_iam_policy_document.streetbees_deployment_trust_relationship"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "streetbees_ebs_policy_attachment",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "streetbees-deployment-role-20190722213628546600000001",
            "policy_arn": "arn:aws:iam::aws:policy/AWSElasticBeanstalkFullAccess",
            "role": "streetbees-deployment-role"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "streetbees_sfn_policy_attachment",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "streetbees-deployment-role-20190722201243190600000002",
            "policy_arn": "arn:aws:iam::858463413507:policy/streetbees-step-functions-deployment-policy",
            "role": "streetbees-deployment-role"
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_iam_policy.streetbees_step_functions_deployment_policy",
            "aws_iam_role.streetbees_deployment_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_check_ebs_application_version_readiness",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-application-version-readiness",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/check_ebs_application_version_readiness.zip",
            "function_name": "streetbees-check-ebs-application-version-readiness",
            "handler": "check_ebs_application_version_readiness.lambda_handler",
            "id": "streetbees-check-ebs-application-version-readiness",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-application-version-readiness/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:45.266+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-application-version-readiness:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "pmBLR82r9JOiOe3Bk8WIYuaOm1yosClTrM2IYfIJK9E=",
            "source_code_size": 575,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_check_ebs_application_version_readiness"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_check_ebs_environment_readiness",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-environment-readiness",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/check_ebs_environment_readiness.zip",
            "function_name": "streetbees-check-ebs-environment-readiness",
            "handler": "check_ebs_environment_readiness.lambda_handler",
            "id": "streetbees-check-ebs-environment-readiness",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-environment-readiness/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:44.257+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-environment-readiness:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "Hns3Bm6VC/ROVioSRA4VplbzAlDCcTlROlChBzFf764=",
            "source_code_size": 524,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_check_ebs_environment_readiness"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_create_ebs_application_version",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-application-version",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/create_ebs_application_version.zip",
            "function_name": "streetbees-create-ebs-application-version",
            "handler": "create_ebs_application_version.lambda_handler",
            "id": "streetbees-create-ebs-application-version",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-application-version/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:39.224+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-application-version:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "u2Wo1f4Iga7YvS9suFrkN8oFehT5UGbR2JAo5C+ocKo=",
            "source_code_size": 800,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_create_ebs_application_version"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_create_ebs_environment",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-environment",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/create_ebs_environment.zip",
            "function_name": "streetbees-create-ebs-environment",
            "handler": "create_ebs_environment.lambda_handler",
            "id": "streetbees-create-ebs-environment",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-environment/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:41.279+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-environment:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "nrHj4TCaDi2Bsws0JRAa15iijROFsIa8KrCxkZlaSBM=",
            "source_code_size": 830,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_create_ebs_environment"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_deploy_ebs_application",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-deploy-ebs-application",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/deploy_ebs_application.zip",
            "function_name": "streetbees-deploy-ebs-application",
            "handler": "deploy_ebs_application.lambda_handler",
            "id": "streetbees-deploy-ebs-application",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-deploy-ebs-application/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:40.237+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-deploy-ebs-application:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "XulCn5eUT3FoLCgaOHOuOhsCGxGtq9JxJc0NdKTKHJA=",
            "source_code_size": 518,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_deploy_ebs_application"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_evaluate_ebs_application_versions",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-application-versions",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/evaluate_ebs_application_versions.zip",
            "function_name": "streetbees-evaluate-ebs-application-versions",
            "handler": "evaluate_ebs_application_versions.lambda_handler",
            "id": "streetbees-evaluate-ebs-application-versions",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-application-versions/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:43.225+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-application-versions:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "Dae3YlkL+yRK4Ou2hbc6lZVGE6oz70CFkrnvfL0WXNs=",
            "source_code_size": 701,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_evaluate_ebs_application_versions"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_evaluate_ebs_environments",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-environments",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/evaluate_ebs_environments.zip",
            "function_name": "streetbees-evaluate-ebs-environments",
            "handler": "evaluate_ebs_environments.lambda_handler",
            "id": "streetbees-evaluate-ebs-environments",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-environments/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:42.128+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-environments:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "thhwFnerFpAbrezApHw/cP2iYGNYdT6mQum6HDSFKi4=",
            "source_code_size": 1451,
            "tags": {},
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_evaluate_ebs_environments"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "lambda_terminate_ebs_environment",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-terminate-ebs-environment",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "filename": "tmp/terminate_ebs_environment.zip",
            "function_name": "streetbees-terminate-ebs-environment",
            "handler": "terminate_ebs_environment.lambda_handler",
            "id": "streetbees-terminate-ebs-environment",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:858463413507:function:streetbees-terminate-ebs-environment/invocations",
            "kms_key_arn": "",
            "last_modified": "2019-07-23T18:12:38.169+0000",
            "layers": null,
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:858463413507:function:streetbees-terminate-ebs-environment:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "runtime": "python3.7",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "Dt9RAw56FTtTOk9VE2x1xkDgdGlvOSdEbj9L9N0xqio=",
            "source_code_size": 487,
            "tags": null,
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.archive_file.lambda_terminate_ebs_environment"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "streetbees_deployment_bucket",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": "private",
            "arn": "arn:aws:s3:::streetbees-deployment-bucket-858463413507",
            "bucket": "streetbees-deployment-bucket-858463413507",
            "bucket_domain_name": "streetbees-deployment-bucket-858463413507.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "streetbees-deployment-bucket-858463413507.s3.eu-west-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "hosted_zone_id": "Z1BKCTXD74EZPE",
            "id": "streetbees-deployment-bucket-858463413507",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "policy": null,
            "region": "eu-west-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [],
            "tags": {},
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "private": "bnVsbA==",
          "depends_on": [
            "data.aws_caller_identity.current"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_object",
      "name": "streetbees_cats_archive",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "bucket": "streetbees-deployment-bucket-858463413507",
            "cache_control": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "binary/octet-stream",
            "etag": "f8eba0e34f2f761ec0d80ddf2ce859cf",
            "id": "cats/cats-1.0.0.zip",
            "key": "cats/cats-1.0.0.zip",
            "kms_key_id": null,
            "server_side_encryption": "",
            "source": "tmp/cats.zip",
            "storage_class": "STANDARD",
            "tags": {},
            "version_id": "",
            "website_redirect": ""
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_s3_bucket.streetbees_deployment_bucket"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_sfn_state_machine",
      "name": "streetbees_deployment_role",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "creation_date": "2019-07-22T21:37:21Z",
            "definition": "{\n  \"StartAt\": \"EvaluateEBSApplicationVersions\",\n  \"States\": {\n    \"EvaluateEBSApplicationVersions\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-application-versions\",\n      \"Next\": \"DoesVersionExist\"\n    },\n    \"DoesVersionExist\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.versionExists\",\n          \"BooleanEquals\": true,\n          \"Next\": \"EvaluateEBSEnvironments\"\n        }\n      ],\n      \"Default\": \"CreateEBSApplicationVersion\"\n    },\n    \"CreateEBSApplicationVersion\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-application-version\",\n      \"Next\": \"WaitForEBSApplicationVersion\"\n    },\n    \"WaitForEBSApplicationVersion\": {\n      \"Type\": \"Wait\",\n      \"Seconds\": 5,\n      \"Next\": \"CheckEBSApplicationVersionReadiness\"\n    },\n    \"CheckEBSApplicationVersionReadiness\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-application-version-readiness\",\n      \"Next\": \"IsEBSApplicationVersionReady\"\n    },\n    \"IsEBSApplicationVersionReady\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.versionStatus\",\n          \"StringEquals\": \"PROCESSED\",\n          \"Next\": \"EvaluateEBSEnvironments\"\n        },\n        {\n          \"Variable\": \"$.versionStatus\",\n          \"StringEquals\": \"FAILED\",\n          \"Next\": \"ApplicationVersionFail\"\n        }\n      ],\n      \"Default\": \"WaitForEBSApplicationVersion\"\n    },\n    \"EvaluateEBSEnvironments\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:eu-west-1:858463413507:function:streetbees-evaluate-ebs-environments\",\n      \"Next\": \"DetermineEnvironmentAction\"\n    },\n    \"DetermineEnvironmentAction\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.nextState\",\n          \"StringEquals\": \"PipelineSuccess\",\n          \"Next\": \"PipelineSuccess\"\n        },\n        {\n          \"Variable\": \"$.nextState\",\n          \"StringEquals\": \"CreateEBSEnvironment\",\n          \"Next\": \"CreateEBSEnvironment\"\n        }\n      ]\n    },\n    \"CreateEBSEnvironment\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:eu-west-1:858463413507:function:streetbees-create-ebs-environment\",\n      \"Next\": \"WaitForEBSEnvironmentReady\"\n    },\n    \"WaitForEBSEnvironmentReady\": {\n      \"Type\": \"Wait\",\n      \"Seconds\": 20,\n      \"Next\": \"CheckEBSEnvironmentReadiness\"\n    },\n    \"CheckEBSEnvironmentReadiness\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:eu-west-1:858463413507:function:streetbees-check-ebs-environment-readiness\",\n      \"Next\": \"IsEBSEnvironmentReady\"\n    },\n    \"IsEBSEnvironmentReady\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.environmentHealth\",\n          \"StringEquals\": \"Red\",\n          \"Next\": \"EnvironmentFail\"\n        },\n        {\n          \"Variable\": \"$.environmentStatus\",\n          \"StringEquals\": \"Ready\",\n          \"Next\": \"EvaluateEBSEnvironments\"\n        }\n      ],\n      \"Default\": \"WaitForEBSEnvironmentReady\"\n    },\n    \"ApplicationVersionFail\": {\n      \"Type\": \"Fail\",\n      \"Cause\": \"Application version ended in Failed state.\"\n    },\n    \"EnvironmentFail\": {\n      \"Type\": \"Fail\",\n      \"Cause\": \"Failure launching environment.\"\n    },\n    \"PipelineSuccess\": {\n      \"Type\": \"Succeed\"\n    }\n  }\n}",
            "id": "arn:aws:states:eu-west-1:858463413507:stateMachine:streetbees-state-machine-ebs-deployment",
            "name": "streetbees-state-machine-ebs-deployment",
            "role_arn": "arn:aws:iam::858463413507:role/streetbees-deployment-role",
            "status": "ACTIVE",
            "tags": {}
          },
          "private": "bnVsbA==",
          "depends_on": [
            "aws_iam_role.streetbees_deployment_role",
            "data.template_file.sfn_blue_green_ebs_deployment"
          ]
        }
      ]
    }
  ]
}
